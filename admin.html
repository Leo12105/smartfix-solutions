<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel de AdministraciÃ³n</title>
  <link rel="stylesheet" href="admin.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <header>
    <h1>Panel de AdministraciÃ³n</h1>
    <nav>
      <a href="index.html">Volver al sitio</a>
    </nav>
  </header>

  <section class="panel">
    <h2>GestiÃ³n de Servicios</h2>
    <button id="abrirModal">âž• Agregar nuevo servicio</button>
    <div class="lista-servicios"></div>
  </section>

  <!-- Ventana emergente -->
  <div id="modal" class="modal">
    <div class="modal-contenido">
      <span id="cerrarModal" class="cerrar">&times;</span>
      <h2>Agregar Servicio</h2>
      <form id="formServicio">
        <label for="nombre">Nombre del servicio:</label>
        <input type="text" id="nombre" required>

        <label for="precio">Precio:</label>
        <input type="text" id="precio" required>

        <button type="submit">Guardar</button>
      </form>
    </div>
  </div>

  <script>
    const modal = document.getElementById("modal");
    const abrir = document.getElementById("abrirModal");
    const cerrar = document.getElementById("cerrarModal");
    const form = document.getElementById("formServicio");
    const lista = document.querySelector(".lista-servicios");

    abrir.onclick = () => modal.style.display = "block";
    cerrar.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

    // Mostrar servicios guardados
    function mostrarServicios() {
      lista.innerHTML = "";
      const servicios = JSON.parse(localStorage.getItem("servicios")) || [];
      servicios.forEach(s => {
        const div = document.createElement("div");
        div.classList.add("servicio");
        div.innerHTML = `
          <h3>${s.nombre}</h3>
          <p>Precio: ${s.precio}</p>
          <a href="https://wa.me/53XXXXXXXXX?text=Hola,%20quiero%20informaciÃ³n%20sobre%20${encodeURIComponent(s.nombre)}"
             class="btn-whatsapp" target="_blank">ðŸ“± Consultar por WhatsApp</a>
        `;
        lista.appendChild(div);
      });
    }

    mostrarServicios();

    // Guardar servicio en localStorage
    form.onsubmit = (e) => {
      e.preventDefault();
      const nombre = document.getElementById("nombre").value;
      const precio = document.getElementById("precio").value;

      const servicios = JSON.parse(localStorage.getItem("servicios")) || [];
      servicios.push({ nombre, precio });
      localStorage.setItem("servicios", JSON.stringify(servicios));

      mostrarServicios();
      modal.style.display = "none";
      form.reset();
    };
  </script>
</body>
</html>
